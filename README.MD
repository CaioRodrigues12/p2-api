
## Funcionalidades

- CRUD completo de usu√°rios
- Integra√ß√£o com BetterStack (logs estruturados)
- Documenta√ß√£o autom√°tica via Swagger
- Docker (build, run e compose)
- Pipeline CI/CD no GitHub Actions
- Deploy autom√°tico no Render
- PostgreSQL online
- Endpoints de health check e status

## Requisitos

- Node.js 18+
- Docker + Docker Compose
- Contas em GitHub, Docker Hub, Render e BetterStack
- Banco PostgreSQL acess√≠vel online

## üîß Configura√ß√£o Local

1. Clone o reposit√≥rio:
   ```bash
   git clone https://github.com/CaioRodrigues12/p2-api.git
   cd api-integracao
   ```

2. Instale as depend√™ncias:
   ```bash
   npm install
   ```

3. Configure as vari√°veis de ambiente:
   Crie o arquivo `.env` na raiz:
   ```env
   DATABASE_URL=postgresql://usuario:senha@host:porta/banco
   BETTERSTACK_URL=https://in.logs.betterstack.com/
   BETTERSTACK_TOKEN=seu_token
   NODE_ENV=development
   PORT=3000
   ```

4. Execute com Docker Compose (recomendado):
   ```bash
   npm run docker:compose
   ```
   Ou rode localmente:
   ```bash
   npm run dev
   ```

## üê≥ Docker

- Build:
  ```bash
  npm run docker:build
  ```
- Executar container:
  ```bash
  npm run docker:run
  ```
- Compose (API + PostgreSQL):
  ```bash
  npm run docker:compose
  ```

## üìö Endpoints

- `GET /` ‚Üí Info da API
- `GET /api-docs` ‚Üí Documenta√ß√£o Swagger com todos endpoints
- `GET /test-log` ‚Üí Envia log de teste para BetterStack

## ‚öôÔ∏è CI/CD

### Secrets no GitHub

Configure no reposit√≥rio:
```
DOCKER_USERNAME
DOCKER_PASSWORD
RENDER_API_KEY
RENDER_SERVICE_ID
BETTERSTACK_URL
BETTERSTACK_TOKEN
DATABASE_URL
EMAIL_USER
EMAIL_PASSWORD
NOTIFICATION_EMAIL
```

### Docker Hub
- Crie um reposit√≥rio com o mesmo nome do projeto e configure as credenciais no GitHub.

### Render
- Crie um Web Service configurado para usar Docker.
- Configure vari√°veis de ambiente.
- Guarde o Service ID e a API Key para os secrets.

### BetterStack
- Configure um source de logs, obtenha a URL/token e adicione nos secrets do GitHub.

## üîÑ Pipeline

O pipeline executa:
- Integra√ß√£o: checkout, depend√™ncias, build, versionamento, build da imagem Docker.
- Deploy: push da imagem no Docker Hub, tag `latest`, atualiza√ß√£o no Render.


## Fluxo Git

- `main` ‚Üí Produ√ß√£o
- `develop` ‚Üí Desenvolvimento
- `feature/*` ‚Üí Funcionalidades
- `hotfix/*` ‚Üí Corre√ß√µes cr√≠ticas
